<form id="coachProfileForm" enctype="multipart/form-data" class="space-y-6">
    {% csrf_token %}


    <!-- Error Summary -->
    <div id="formErrors" style="display: none;"
         class="bg-red-50 border border-red-200 rounded-lg p-4 mb-4">
        <div class="text-red-800 text-sm font-semibold mb-2">Terjadi kesalahan:</div>
        <ul id="errorList" class="text-red-700 text-sm space-y-1 list-disc list-inside"></ul>
    </div>


    <!-- Current Profile Picture Preview -->
    {% if coach_profile and coach_profile.profile_picture %}
    <div class="flex justify-center mb-6">
        <div class="relative">
            <img src="{{ coach_profile.profile_picture.url }}"
                 alt="Foto Profil Saat Ini"
                 id="currentProfilePic"
                 class="w-24 h-24 rounded-full object-cover border-4 border-teal-100 shadow-lg">
            <div class="absolute bottom-0 right-0 bg-teal-500 rounded-full p-1.5 shadow-md">
                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/>
                </svg>
            </div>
        </div>
    </div>
    {% endif %}


    <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
        <!-- Age Field -->
        <div class="form-group">
            <label for="id_age" class="block text-sm font-semibold text-gray-700 mb-2">
                Umur <span class="text-red-500">*</span>
            </label>
            {{ form.age }}
            <span class="field-error text-red-600 text-xs mt-1 hidden"></span>
        </div>


        <!-- Rate Per Hour Field -->
        <div class="form-group">
            <label for="id_rate_per_hour" class="block text-sm font-semibold text-gray-700 mb-2">
                Tarif per Jam (Rp) <span class="text-red-500">*</span>
            </label>
            {{ form.rate_per_hour }}
            <span class="field-error text-red-600 text-xs mt-1 hidden"></span>
        </div>


        <!-- Main Sport Trained Field -->
        <div class="form-group md:col-span-2">
            <label for="id_main_sport_trained" class="block text-sm font-semibold text-gray-700 mb-2">
                Olahraga Utama <span class="text-red-500">*</span>
            </label>
            {{ form.main_sport_trained }}
            <span class="field-error text-red-600 text-xs mt-1 hidden"></span>
        </div>


        <!-- Experience Description Field -->
        <div class="form-group md:col-span-2">
            <label for="id_experience_desc" class="block text-sm font-semibold text-gray-700 mb-2">
                Deskripsi Pengalaman
            </label>
            {{ form.experience_desc }}
            <span class="field-error text-red-600 text-xs mt-1 hidden"></span>
            <p class="text-xs text-gray-500 mt-1">Ceritakan pengalaman dan keahlian Anda</p>
        </div>


        <!-- Service Areas Field -->
        <div class="form-group md:col-span-2">
            <label class="block text-sm font-semibold text-gray-700 mb-3">
                Area Layanan <span class="text-red-500">*</span>
            </label>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-3 max-h-48 overflow-y-auto p-3 bg-gray-50 rounded-lg border border-gray-200">
                {% for checkbox in form.service_areas %}
                <label class="flex items-center space-x-2 cursor-pointer hover:bg-gray-100 p-2 rounded">
                    {{ checkbox.tag }}
                    <span class="text-sm text-gray-700">{{ checkbox.choice_label }}</span>
                </label>
                {% endfor %}
            </div>
            <span class="field-error text-red-600 text-xs mt-1 hidden"></span>
        </div>


        <!-- Profile Picture Field -->
        <div class="form-group md:col-span-2">
            <label for="id_profile_picture" class="block text-sm font-semibold text-gray-700 mb-2">
                Foto Profil
            </label>
            {{ form.profile_picture }}
            <span class="field-error text-red-600 text-xs mt-1 hidden"></span>
            <p class="text-xs text-gray-500 mt-1">Format: JPG, PNG (Max 5MB)</p>
           
            <!-- Image Preview -->
            <div id="imagePreviewContainer" class="mt-3 hidden">
                <img id="imagePreview" src="" alt="Preview"
                     class="w-32 h-32 rounded-lg object-cover border-2 border-gray-300 shadow">
            </div>
        </div>
    </div>


    <div class="flex gap-3 pt-4 border-t border-gray-200">
        <button type="button" onclick="hideManageModal()"
                class="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg transition duration-200">
            Batal
        </button>
        <button type="submit" id="submitBtn"
                class="flex-1 bg-teal-500 hover:bg-teal-600 text-white font-semibold py-3 px-6 rounded-lg transition duration-200 flex items-center justify-center">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
            Simpan Profil
        </button>
    </div>
</form>


<style>
    #coachProfileForm input[type="text"],
    #coachProfileForm input[type="number"],
    #coachProfileForm select,
    #coachProfileForm textarea {
        display: block;
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #E5E7EB;
        border-radius: 0.5rem;
        background-color: #F9FAFB;
        font-size: 0.938rem;
        color: #374151;
        transition: all 0.2s ease;
    }


    #coachProfileForm input:focus,
    #coachProfileForm select:focus,
    #coachProfileForm textarea:focus {
        border-color: #14b8a6;
        background-color: #ffffff;
        outline: none;
        box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
    }


    #coachProfileForm textarea {
        resize: vertical;
        min-height: 100px;
    }


    #coachProfileForm input[type="file"] {
        display: block;
        width: 100%;
        padding: 0.5rem;
        font-size: 0.875rem;
        color: #4B5563;
        border: 1px solid #E5E7EB;
        border-radius: 0.5rem;
        background-color: #F9FAFB;
        cursor: pointer;
    }
        .hidden {
        display: none !important;
    }


    #coachProfileForm input[type="text"],
    #coachProfileForm input[type="number"],
    #coachProfileForm select,
    #coachProfileForm textarea {
        display: block;
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #E5E7EB;
        border-radius: 0.5rem;
        background-color: #F9FAFB;
        font-size: 0.938rem;
        color: #374151;
        transition: all 0.2s ease;
    }


    #coachProfileForm input:focus,
    #coachProfileForm select:focus,
    #coachProfileForm textarea:focus {
        border-color: #14b8a6;
        background-color: #ffffff;
        outline: none;
        box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
    }


    #coachProfileForm textarea {
        resize: vertical;
        min-height: 100px;
    }


    #coachProfileForm input[type="file"] {
        display: block;
        width: 100%;
        padding: 0.5rem;
        font-size: 0.875rem;
        color: #4B5563;
        border: 1px solid #E5E7EB;
        border-radius: 0.5rem;
        background-color: #F9FAFB;
        cursor: pointer;
    }


    .field-error {
        display: block;
        margin-top: 0.25rem;
    }
</style>


<script>
// Image preview functionality
document.getElementById('id_profile_picture').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('imagePreview').src = e.target.result;
            document.getElementById('imagePreviewContainer').classList.remove('hidden');
        }
        reader.readAsDataURL(file);
    }
});
</script>



