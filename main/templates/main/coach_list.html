{% extends "base.html" %}
{% block title %}Daftar Pelatih{% endblock title %}

{% block content %}
<div style="padding: 20px; max-width: 1200px; margin: auto;">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h2>Daftar Pelatih</h2>
    <a href="{% url 'home' %}" 
       style="padding: 8px 16px; background: #6c757d; color: #fff; 
              text-decoration: none; border-radius: 6px;">
      ‚Üê Kembali
    </a>
  </div>

  <!-- Filter Section -->
  <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
    <form method="GET" style="display: flex; gap: 10px; flex-wrap: wrap;">
      <input type="text" name="q" placeholder="Cari nama pelatih..." 
             value="{{ request.GET.q }}"
             style="flex: 1; min-width: 200px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
      
      <select name="sport" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
        <option value="">-- Semua Olahraga --</option>
        {% for cat in categories %}
          <option value="{{ cat.id }}" {% if request.GET.sport == cat.id|stringformat:"s" %}selected{% endif %}>
            {{ cat.name }}
          </option>
        {% endfor %}
      </select>

      <select name="area" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
        <option value="">-- Semua Area --</option>
        {% for area in areas %}
          <option value="{{ area.id }}" {% if request.GET.area == area.id|stringformat:"s" %}selected{% endif %}>
            {{ area.name }}
          </option>
        {% endfor %}
      </select>

      <button type="submit" style="padding: 8px 20px; background: #007bff; color: #fff; 
                                    border: none; border-radius: 4px; cursor: pointer;">
        Cari
      </button>
      
      <a href="{% url 'coach_list' %}" 
         style="padding: 8px 20px; background: #6c757d; color: #fff; 
                text-decoration: none; border-radius: 4px; display: inline-block;">
        Reset
      </a>
    </form>
  </div>

  <!-- Coach List -->
  <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
    {% for coach in coaches %}
    <div style="border: 1px solid #ddd; border-radius: 8px; padding: 20px; 
                background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                transition: transform 0.2s;">
      <h3 style="margin-top: 0; color: #007bff;">
        {{ coach.user.get_full_name|default:coach.user.username }}
      </h3>
      
      <div style="margin: 15px 0;">
        <p style="margin: 5px 0;">
          <strong>Umur:</strong> {{ coach.age|default:"-" }} tahun
        </p>
        <p style="margin: 5px 0;">
          <strong>Olahraga:</strong> {{ coach.main_sport_trained.name }}
        </p>
        <p style="margin: 5px 0;">
          <strong>Tarif:</strong> Rp {{ coach.rate_per_hour|floatformat:0 }}/jam
        </p>
        <p style="margin: 5px 0;">
          <strong>Area Layanan:</strong>
          {% for area in coach.service_areas.all %}
            {{ area.name }}{% if not forloop.last %}, {% endif %}
          {% endfor %}
        </p>
      </div>

      <div style="margin-top: 10px;">
        <p style="color: #666; font-size: 14px; 
                  display: -webkit-box; -webkit-line-clamp: 3; 
                  -webkit-box-orient: vertical; overflow: hidden;">
          {{ coach.experience_desc|default:"Belum ada deskripsi pengalaman." }}
        </p>
      </div>

      <a href="{% url 'coach_detail_public' coach.id %}" 
         style="display: block; margin-top: 15px; padding: 10px; 
                background: #28a745; color: white; text-align: center; 
                text-decoration: none; border-radius: 4px;
                transition: background 0.2s;">
        Lihat Detail
      </a>
    </div>
    {% empty %}
    <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #666;">
      <p>Belum ada pelatih yang tersedia.</p>
    </div>
    {% endfor %}
  </div>
</div>

<style>
  div[style*="box-shadow"]:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.15) !important;
  }
  
  a[style*="background: #28a745"]:hover {
    background: #218838 !important;
  }
</style>
{% endblock content %}