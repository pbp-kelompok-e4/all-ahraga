{% extends 'base_dashboard.html' %}
{% load static %}

{% block title %}Booking Management{% endblock title %}
{% block page_title %}Booking Management{% endblock page_title %}

{% block content %}
<div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100">
  <h3 class="text-xl font-semibold text-gray-900 mb-4">Semua Booking ({{ bookings_page.paginator.count }})</h3>
  
  <div class="overflow-x-auto">
    <table class="w-full min-w-max text-left">
      <thead>
        <tr class="border-b border-gray-200">
          <th class="py-3 px-4 text-sm font-semibold text-gray-500">ID</th>
          <th class="py-3 px-4 text-sm font-semibold text-gray-500">Customer</th>
          <th class="py-3 px-4 text-sm font-semibold text-gray-500">Venue</th>
          <th class="py-3 px-4 text-sm font-semibold text-gray-500">Coach</th>
          <th class="py-3 px-4 text-sm font-semibold text-gray-500">Total</th>
          <th class="py-3 px-4 text-sm font-semibold text-gray-500">Status</th>
        </tr>
      </thead>
      <tbody>
        {% for booking in bookings_page %}
          <tr class="border-b border-gray-100 hover:bg-gray-50">
            <td class="py-3 px-4 text-sm text-gray-700">#{{ booking.id }}</td>
            <td class="py-3 px-4 text-sm text-gray-700">{{ booking.customer.username }}</td>
            <td class="py-3 px-4 text-sm text-gray-700">{{ booking.venue_schedule.venue.name|truncatechars:20 }}</td>
            <td class="py-3 px-4 text-sm text-gray-600">{{ booking.coach_schedule.coach.user.username|default:"-" }}</td>
            <td class="py-3 px-4 text-sm text-gray-600">Rp {{ booking.total_price|floatformat:0 }}</td>
            <td class="py-3 px-4 text-sm">
              {% if booking.transaction.status == 'CONFIRMED' %}
                <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-700 rounded-full">Confirmed</span>
              {% elif booking.transaction.status == 'PENDING' %}
                <span class="px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-700 rounded-full">Pending</span>
              {% else %}
                <span class="px-2 py-1 text-xs font-medium bg-red-100 text-red-700 rounded-full">Cancelled</span>
              {% endif %}
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="6" class="py-4 px-4 text-center text-gray-500">Belum ada booking.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {% include 'main/_pagination.html' with page_obj=bookings_page %}
</div>
{% endblock content %}