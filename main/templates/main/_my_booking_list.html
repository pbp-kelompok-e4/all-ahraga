{% if bookings %}
    <ul class="space-y-5">
        {% for booking in bookings %}
            <li id="booking-item-{{ booking.id }}" class="border border-gray-200 rounded-lg p-5 bg-gray-50">
                <h4 class="text-lg mb-3">
                    Booking #{{ booking.id }} - 
                    <strong>{{ booking.venue_schedule.venue.name }}</strong>
                </h4>
                
                <p class="mb-1">
                    <strong>Tanggal:</strong> {{ booking.venue_schedule.date|date:"l, d F Y" }}
                </p>
                <p class="mb-1">
                    <strong>Waktu:</strong> {{ booking.venue_schedule.start_time|time:"H:i" }} - {{ booking.venue_schedule.end_time|time:"H:i" }}
                </p>

                {% if booking.coach_schedule %}
                <p class="mb-1">    
                    <strong>Coach:</strong> {{ booking.coach_schedule.coach.user.get_full_name|default:booking.coach_schedule.coach.user.username }}
                </p>
                {% endif %}

                {% with equipment_list=booking.equipment_details.all %}
                {% if equipment_list %}
                <p class="mb-1">
                    <strong>Peralatan:</strong>
                    {% for eq in equipment_list %}
                    {{ eq.equipment.name }} (x{{ eq.quantity }}){% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </p>
                {% endif %}
                {% endwith %}

                <p class="mb-1">
                    <strong>Total Biaya:</strong> Rp {{ booking.total_price }}
                </p>
                <p class="mb-1">
                    <strong>Metode Pembayaran:</strong> {{ booking.transaction.payment_method }}
                </p>
                <p class="mb-3">
                    <strong>Status Pembayaran:</strong> 
                    <span class="font-bold text-orange-500">MENUNGGU PEMBAYARAN</span>
                </p>

                <div class="flex gap-3">
                    <button onclick="openEditModal({{ booking.id }})"
                            class="px-4 py-2 bg-blue-600 text-white font-semibold rounded hover:bg-blue-700 transition-colors">
                        Edit Booking
                    </button>
                    
                    <a href="{% url 'customer_payment' booking.id %}"
                        class="px-4 py-2 bg-green-600 text-white font-semibold rounded hover:bg-green-700 transition-colors">
                        Bayar Sekarang
                    </a>
                    
                    <form action="{% url 'delete_booking' booking.id %}" method="POST" class="delete-booking-form m-0">
                        {% csrf_token %}
                        <button type="submit"
                                class="px-4 py-2 bg-red-600 text-white font-semibold rounded hover:bg-red-700 transition-colors">
                            Cancel Booking
                        </button>
                    </form>
                </div>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p class="text-center text-gray-600 py-10 font-medium" id="empty-message">
        {% if request.GET.q %}
            Tidak ada booking tertending yang cocok dengan pencarian Anda.
        {% else %}
            Tidak ada booking yang menunggu pembayaran. Semua booking Anda sudah lunas! üëç
        {% endif %}
    </p>
{% endif %}