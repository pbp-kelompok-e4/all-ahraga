{% load static %}
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>All-Ahraga | {% block title %}{% endblock title %}</title> 

  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  {% block extra_head %}{% endblock extra_head %}
</head>

<body class="min-h-screen flex flex-col bg-gray-50 text-gray-800">

<!-- ✅ NAVBAR FIXED -->
<header class="bg-slate-800 text-white shadow-lg" x-data="{ openMenu: false, openUser: false }">
  <div class="max-w-7xl mx-auto px-4 sm:px-8">
    <div class="flex justify-between items-center h-16">

      <!-- LOGO -->
      <a href="{% url 'index' %}" class="text-2xl font-bold hover:text-blue-400 transition">
        All-Ahraga
      </a>

      <!-- DESKTOP NAV -->
      <nav class="hidden md:flex space-x-6 text-sm font-medium">
        {% if user.is_authenticated and user.profile %}
          {% if user.is_superuser or user.is_staff %}
            <a href="{% url 'admin_dashboard' %}" class="hover:text-blue-400 transition">Admin Dashboard</a>
            <a href="/admin/" target="_blank" class="hover:text-blue-400 transition">Django Admin</a>

          {% elif user.profile.is_venue_owner %}
            <a href="{% url 'venue_dashboard' %}" class="hover:text-blue-400 transition">Manage Venue</a>
            <a href="{% url 'venue_revenue' %}" class="hover:text-blue-400 transition">Revenue Report</a>

          {% elif user.profile.is_coach %}
            <a href="{% url 'coach_list' %}" class="hover:text-blue-400 transition">Daftar Pelatih</a>
            <a href="{% url 'coach_revenue_report' %}" class="hover:text-blue-400 transition">Laporan Pendapatan</a>
            <a href="{% url 'coach_schedule' %}" class="hover:text-blue-400 transition">Jadwal Kamu</a>
            <a href="{% url 'coach_profile' %}" class="hover:text-blue-400 transition">Profil Kamu</a>

          {% elif user.profile.is_customer %}
            <a href="{% url 'my_bookings' %}" class="hover:text-blue-400 transition">Bookingan Saya</a>
            <a href="{% url 'booking_history' %}" class="hover:text-blue-400 transition">Riwayat Booking</a>
          {% endif %}
        {% else %}
          <a href="{% url 'register' %}" class="hover:text-blue-400 transition">Daftar</a>
          <a href="{% url 'login' %}" class="hover:text-blue-400 transition">Masuk</a>
        {% endif %}
      </nav>

      <!-- USER + BURGER -->
      <div class="flex items-center space-x-3">

        {% if user.is_authenticated %}
          <!-- USER DROPDOWN -->
          <div class="relative" x-data="{ openUser: false }">
            <button @click="openUser = !openUser"
              class="p-2 rounded-full hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-400">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
              </svg>
            </button>

            <div x-show="openUser" @click.away="openUser = false" x-transition
              class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 ring-1 ring-black ring-opacity-5"
              style="display: none;">
              <div class="px-4 py-2 text-sm text-gray-500 border-b">
                <strong class="text-gray-900">{{ user.username }}</strong>
              </div>
              <a href="{% url 'logout' %}" 
                 class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-red-600 transition">
                 Keluar
              </a>
            </div>
          </div>
        {% endif %}

        <!-- BURGER BUTTON (mobile) -->
        <button @click="openMenu = !openMenu"
          class="md:hidden p-2 rounded-md hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-400">
          <template x-if="!openMenu">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
              viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M4 6h16M4 12h16M4 18h16" />
            </svg>
          </template>
          <template x-if="openMenu">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
              viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="M6 18L18 6M6 6l12 12" />
            </svg>
          </template>
        </button>
      </div>
    </div>

    <!-- ✅ MOBILE NAV (Dropdown) -->
    <div x-show="openMenu" x-transition @click.away="openMenu = false"
         class="md:hidden mt-2 bg-slate-700 rounded-lg p-4 space-y-3 text-sm">
      {% if user.is_authenticated and user.profile %}
        {% if user.is_superuser or user.is_staff %}
          <a href="{% url 'admin_dashboard' %}" class="block hover:text-blue-400 transition">Admin Dashboard</a>
          <a href="/admin/" target="_blank" class="block hover:text-blue-400 transition">Django Admin</a>
        {% elif user.profile.is_venue_owner %}
          <a href="{% url 'venue_dashboard' %}" class="block hover:text-blue-400 transition">Manage Venue</a>
          <a href="{% url 'venue_revenue' %}" class="block hover:text-blue-400 transition">Revenue Report</a>
        {% elif user.profile.is_coach %}
          <a href="{% url 'coach_list' %}" class="block hover:text-blue-400 transition">Daftar Pelatih</a>
          <a href="{% url 'coach_revenue_report' %}" class="block hover:text-blue-400 transition">Laporan Pendapatan</a>
          <a href="{% url 'coach_schedule' %}" class="block hover:text-blue-400 transition">Jadwal Kamu</a>
          <a href="{% url 'coach_profile' %}" class="block hover:text-blue-400 transition">Profil Kamu</a>
        {% elif user.profile.is_customer %}
          <a href="{% url 'my_bookings' %}" class="block hover:text-blue-400 transition">Bookingan Saya</a>
          <a href="{% url 'booking_history' %}" class="block hover:text-blue-400 transition">Riwayat Booking</a>
        {% endif %}
      {% else %}
        <a href="{% url 'register' %}" class="block hover:text-blue-400 transition">Daftar</a>
        <a href="{% url 'login' %}" class="block hover:text-blue-400 transition">Masuk</a>
      {% endif %}
    </div>
  </div>
</header>

<!-- MAIN CONTENT -->
<main class="flex-grow container mx-auto px-4 py-8">
  {% if messages %}
    <div class="mb-8">
      {% for message in messages %}
        <div class="p-4 mb-4 rounded-lg 
          {% if message.tags == 'success' %}bg-green-100 text-green-700 border border-green-200
          {% elif message.tags == 'error' %}bg-red-100 text-red-700 border border-red-200
          {% else %}bg-blue-100 text-blue-700 border border-blue-200{% endif %}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}
  {% block content %}{% endblock content %}
</main>

<!-- FOOTER -->
<footer class="bg-slate-800 text-white py-6 mt-8">
  <div class="max-w-7xl mx-auto px-6 grid grid-cols-1 sm:grid-cols-3 gap-6 text-center sm:text-left">
    <div>
      <h3 class="text-md font-semibold mb-2">Tentang All-Ahraga</h3>
      <p class="text-gray-300 text-xs leading-relaxed">
        All-Ahraga adalah platform pemesanan lapangan dan pelatih olahraga modern yang
        menghubungkan pelanggan dengan penyedia jasa terbaik di Indonesia.
      </p>
    </div>
    <div>
      <h3 class="text-md font-semibold mb-2">Navigasi</h3>
      <ul class="space-y-1 text-xs text-gray-300">
        <li><a href="{% url 'index' %}" class="hover:text-blue-400 transition">Beranda</a></li>
        <li><a href="#" class="hover:text-blue-400 transition">Tentang Kami</a></li>
        <li><a href="#" class="hover:text-blue-400 transition">Kontak</a></li>
        <li><a href="#" class="hover:text-blue-400 transition">Kebijakan Privasi</a></li>
      </ul>
    </div>
    <div>
      <h3 class="text-md font-semibold mb-2">Ikuti Kami</h3>
      <div class="flex justify-center sm:justify-start space-x-3">
        <a href="#" class="hover:text-blue-400 transition">
          <i class="fa-brands fa-facebook text-sm"></i>
        </a>
        <a href="#" class="hover:text-blue-400 transition">
          <i class="fa-brands fa-twitter text-sm"></i>
        </a>
        <a href="#" class="hover:text-blue-400 transition">
          <i class="fa-brands fa-instagram text-sm"></i>
        </a>
      </div>
    </div>
  </div>
  <div class="mt-6 border-t border-slate-700 pt-3 text-center text-xs text-gray-400">
    &copy; 2025 All-Ahraga — Kelompok 4 PBP E. All rights reserved.
  </div>
</footer>

{% block extra_js %}{% endblock extra_js %}
</body>
</html>
